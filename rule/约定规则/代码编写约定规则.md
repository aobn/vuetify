# 代码编写约定规则

## 1. 技术栈规范

### 1.1 核心技术
- **Vue 3** - 使用Composition API
- **Vuetify 3.x** - UI组件库
- **TypeScript** - 类型安全
- **Vite** - 构建工具
- **Vitest + Vue Test Utils** - 测试框架

### 1.2 状态管理
- 使用Pinia进行状态管理
- 避免使用Vuex

## 3. Vue组件编写规范

### 3.1 组件结构
```vue
<template>
  <!-- 使用Vuetify组件 -->
</template>

<script setup lang="ts">
// 导入
import { ref, computed } from 'vue'
import type { ComponentProps } from '@/types'

// Props定义
interface Props {
  title: string
  count?: number
}

const props = withDefaults(defineProps<Props>(), {
  count: 0
})

// 响应式数据
const isLoading = ref(false)

// 计算属性
const displayTitle = computed(() => props.title.toUpperCase())

// 方法
const handleClick = () => {
  // 处理逻辑
}
</script>

<style scoped>
/* 组件样式 */
</style>
```

### 3.2 Vuetify组件使用
- 使用Vuetify组件,禁止使用element组件
- 使用vuetify-mcp工具获取组件API
- 遵循Vuetify设计规范


```typescript
// Props定义
interface Props {
  modelValue?: string
  disabled?: boolean
  variant?: 'filled' | 'outlined' | 'plain'
}

// Events定义
const emit = defineEmits<{
  'update:modelValue': [value: string]
  'change': [value: string]
}>()
```

## 4. TypeScript规范

### 4.1 类型定义
```typescript
// 接口定义
interface User {
  id: number
  name: string
  email: string
  createdAt: Date
}

// 类型别名
type UserStatus = 'active' | 'inactive' | 'pending'

// 泛型使用
interface ApiResponse<T> {
  data: T
  message: string
  success: boolean
}
```

### 4.2 类型导入导出
```typescript
// 导出类型
export type { User, UserStatus }
export interface { ApiResponse }

// 导入类型
import type { User } from '@/types/user'
```

## 5. 测试规范

### 5.1 测试文件结构
```typescript
import { describe, it, expect } from 'vitest'
import { mount } from '@vue/test-utils'
import { createVuetify } from 'vuetify'
import UserProfile from '@/components/UserProfile.vue'

const vuetify = createVuetify()

describe('UserProfile', () => {
  it('should render user name', () => {
    const wrapper = mount(UserProfile, {
      global: {
        plugins: [vuetify]
      },
      props: {
        user: { name: 'John Doe' }
      }
    })
    
    expect(wrapper.text()).toContain('John Doe')
  })
})
```

### 5.2 测试原则
- 不使用模拟数据
- 测试用户交互
- 测试组件渲染
- 测试Props传递
- 测试Events触发

## 6. 样式规范

### 6.1 CSS类命名
- 使用kebab-case
- 语义化命名
- 避免过度嵌套

### 6.2 Vuetify主题
路径:src/plugins/vuetify.js
Vuetify 包括三个内置主题： 浅色 、 深色 和 系统 。使用 defaultTheme 选项指定应用程序的默认主题。以下示例将默认主题设置为 深色 ：
```typescript
// 主题配置
import { createApp } from 'vue'
import { createVuetify } from 'vuetify'

export default createVuetify({
  theme: {
    defaultTheme: 'dark', // 'light' | 'dark' | 'system'
  },
})
```

## 7. 代码质量

### 7.1 ESLint规则
- 使用Vue官方ESLint配置
- 启用TypeScript规则
- 自定义项目特定规则

### 7.2 代码格式化
- 使用Prettier进行代码格式化
- 统一缩进和换行规则

## 8. 性能优化

### 8.1 组件优化
- 使用`defineAsyncComponent`进行懒加载
- 合理使用`v-memo`指令
- 避免不必要的响应式数据

### 8.2 构建优化
- 代码分割
- 资源压缩
- Tree-shaking

## 9. 错误处理

### 9.1 异常捕获
```typescript
try {
  await apiCall()
} catch (error) {
  console.error('API调用失败:', error)
  // 用户友好的错误提示
}
```

### 9.2 表单验证
- 使用Vuetify内置验证
- 自定义验证规则
- 实时验证反馈


## 更新记录
- 2025-08-30: 初始版本创建